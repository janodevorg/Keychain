{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"anchor":"Enable-keychain-sharing","level":3,"type":"heading","text":"Enable keychain sharing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To enable keychain item sharing:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Enable Keychain Sharing in target > Signing & Capabilities. Click the plus sign to add the"},{"type":"text","text":" "},{"type":"text","text":"capability Keychain Sharing."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Set a value in “Keychain Groups” for each shared keychain item. The value must start with the"},{"type":"text","text":" "},{"type":"text","text":"Bundle Seed ID, followed by an arbitrary string."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This creates a file "},{"type":"text","text":".entitlements, pointed by Build Settings > Code Signing"},{"type":"text","text":" "},{"type":"text","text":"Entitlements. Here is the file I generated:"}]},{"type":"codeListing","syntax":"xml","code":["<?xml version=\"1.0\" encoding=\"UTF-8\"?>","<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"http:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">","<plist version=\"1.0\">","<dict>","    <key>keychain-access-groups<\/key>","    <array>","        <string>$(AppIdentifierPrefix)boardapp.development.credentials<\/string>","    <\/array>","<\/dict>","<\/plist>"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The $(AppIdentifierPrefix) will be replaced with your Team ID. The Team ID is listed in the Member Center:"}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"AppIdentifier"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The whole string for me is “PPSF6CNP8Q.dev.jano.keychain.example”. Yours will be different."}]},{"anchor":"Usage","level":3,"type":"heading","text":"Usage"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Store a value as a generic password:"}]},{"type":"codeListing","syntax":"swift","code":["let account = \"an-arbitrary-string\"","let accessGroup = \"PPSF6CNP8Q.dev.jano.keychain.example\"","let store = ValueKeychainStore(accountName: account, accessGroup: accessGroup)","store.set(\"some value\")","print(store.get()) \/\/ prints \"some value\""]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the ObservedValueStore to react to value changes:"}]},{"type":"codeListing","syntax":"swift","code":["let accessGroup = \"PPSF6CNP8Q.dev.jano.keychain.example\"","let underlyingStore = ValueKeychainStore(accountName: account, accessGroup: accessGroup)","let store = await ObservedValueStore(valueStore: underlyingStore)","let observation = await store.observe { [weak self] value in","    print(\"Value changed to \\(value)\")","} ","try await store.set(\"bananas\")","observation.stopObserving()"]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"Keychain"}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/keychain"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Keychain\/documentation\/Keychain","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Keychain wrapper."}],"kind":"symbol","metadata":{"roleHeading":"Framework","externalID":"Keychain","title":"Keychain","symbolKind":"module","role":"collection","modules":[{"name":"Keychain"}]},"hierarchy":{"paths":[[]]},"topicSections":[{"title":"Code","identifiers":["doc:\/\/Keychain\/documentation\/Keychain","doc:\/\/Keychain\/documentation\/Keychain\/KeychainError","doc:\/\/Keychain\/documentation\/Keychain\/ObservedValueStore","doc:\/\/Keychain\/documentation\/Keychain\/ValueKeychainStore","doc:\/\/Keychain\/documentation\/Keychain\/ValueStore"]},{"title":"Classes","identifiers":["doc:\/\/Keychain\/documentation\/Keychain\/Observation"]}],"references":{"doc://Keychain/documentation/Keychain/KeychainError":{"role":"symbol","title":"KeychainError","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"KeychainError"}],"abstract":[],"identifier":"doc:\/\/Keychain\/documentation\/Keychain\/KeychainError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"KeychainError"}],"url":"\/documentation\/keychain\/keychainerror"},"doc://Keychain/documentation/Keychain":{"role":"collection","title":"Keychain","abstract":[{"type":"text","text":"Keychain wrapper."}],"identifier":"doc:\/\/Keychain\/documentation\/Keychain","kind":"symbol","type":"topic","url":"\/documentation\/keychain"},"doc://Keychain/documentation/Keychain/Observation":{"role":"symbol","title":"Observation","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Observation"}],"abstract":[{"type":"text","text":"Result from an observer registration."},{"type":"text","text":" "},{"type":"text","text":"This object can be used by observers to unregister themselves."}],"identifier":"doc:\/\/Keychain\/documentation\/Keychain\/Observation","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Observation"}],"url":"\/documentation\/keychain\/observation"},"doc://Keychain/documentation/Keychain/ValueStore":{"role":"symbol","title":"ValueStore","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ValueStore"}],"abstract":[{"type":"text","text":"An interface to a store that reads and writes a single value."}],"identifier":"doc:\/\/Keychain\/documentation\/Keychain\/ValueStore","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ValueStore"}],"url":"\/documentation\/keychain\/valuestore"},"AppIdentifier":{"alt":"AppIdentifier","type":"image","identifier":"AppIdentifier","variants":[{"url":"\/images\/AppIdentifier.png","traits":["1x","light"]}]},"Keychain":{"alt":"Keychain","type":"image","identifier":"Keychain","variants":[{"url":"\/images\/Keychain@2x.png","traits":["2x","light"]},{"url":"\/images\/Keychain~dark@2x.png","traits":["2x","dark"]}]},"doc://Keychain/documentation/Keychain/ObservedValueStore":{"role":"symbol","title":"ObservedValueStore","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"ObservedValueStore"}],"abstract":[{"type":"text","text":"A store for a value that can be observed."}],"identifier":"doc:\/\/Keychain\/documentation\/Keychain\/ObservedValueStore","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ObservedValueStore"}],"url":"\/documentation\/keychain\/observedvaluestore"},"doc://Keychain/documentation/Keychain/ValueKeychainStore":{"role":"symbol","title":"ValueKeychainStore","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"ValueKeychainStore"}],"abstract":[{"type":"text","text":"Stores a value as a generic password."}],"identifier":"doc:\/\/Keychain\/documentation\/Keychain\/ValueKeychainStore","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ValueKeychainStore"}],"url":"\/documentation\/keychain\/valuekeychainstore"}}}